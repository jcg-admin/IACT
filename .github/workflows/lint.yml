name: Lint Requirements Frontmatter

on:
  pull_request:
    branches: [ main ]
    paths:
      - 'implementacion/**/requisitos/**/*.md'
  push:
    paths:
      - 'implementacion/**/requisitos/**/*.md'

jobs:
  lint-frontmatter:
    name: Validate Requirements Frontmatter
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Validate frontmatter
        run: bash scripts/validation/quality/validate_frontmatter.sh --path implementacion/

      - name: Summary
        if: always()
        run: |
          echo "## Frontmatter Validation" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "All requirements must have valid YAML frontmatter with required fields:" >> $GITHUB_STEP_SUMMARY
          echo "- id, tipo, titulo, dominio, owner, prioridad, estado, fecha_creacion" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "See templates in docs/plantillas/" >> $GITHUB_STEP_SUMMARY
