# Revisión de inconsistencias del repositorio (2025-11-12 15:35 UTC)

## Evidencia de técnicas de Prompt Engineering aplicadas
- **Decomposición iterativa (Chain-of-Thought estructurado)**: antes de listar hallazgos, dividí el repositorio (excluyendo `api/` y `ui/`) en clústeres temáticos (`docs/`, `scripts/`, `infrastructure/`, `logs_data/`, `respaldo/`, raíz) y formulé subpreguntas para cada clúster. Documenté los resultados de cada subpregunta más abajo.
- **Verificación cruzada (Self-Consistency Prompting)**: para cada inconsistencia, contrasté la hipótesis inicial con comandos de validación (`ls`, `find`, `rg`) ejecutados en pasos separados. Solo incluí hallazgos que se confirmaron al menos dos veces (sección "Pruebas de validación" en cada subsección).
- **Reflexión post-análisis (Reflexion Prompt)**: tras completar el primer borrador, lancé una revisión crítica enfocada en buscar elementos duplicados o rutas obsoletas no cubiertas. El resultado se sintetiza en "Riesgos operativos" y "Recomendaciones inmediatas".
- **Registro de contexto (Prompt Notes)**: cada subsección inicia con las preguntas guía que utilicé para delimitar el scope; esto asegura trazabilidad sobre cómo el prompting orientó los hallazgos.

## 1. Documentación raíz desalineada
**Preguntas guía**: "¿Qué partes del README no corresponden con los artefactos reales?", "¿Existen comandos/documentos mencionados que no estén presentes?"
**Pruebas de validación**: `ls`, `rg "Makefile" README.md`, navegación manual a rutas enlazadas.
- `README.md` asegura la existencia de un `Makefile` con comandos (`make help`, `make docs-serve`, etc.), pero el archivo no existe en la raíz. Los comandos descritos son inejecutables.
- Se pide ejecutar `./scripts/verificar_servicios.sh`; el script no está disponible. La guía asociada apunta a `docs/devops/runbooks/verificar_servicios.md`, mientras que la ruta real es `docs/operaciones/verificar_servicios.md`, generando enlaces rotos.
- El README sigue hablando de un directorio `frontend/`, aunque la carpeta actual es `ui/`. Toda la sección de pruebas front-end queda desfasada respecto al layout real.

## 2. Índices y estructura de `docs/`
**Preguntas guía**: "¿Hay rutas duplicadas para el índice?", "¿Qué enlaces del índice fallan al resolverlos?", "¿Sigue existiendo contenido 'migrado'?"
**Pruebas de validación**: `ls docs`, `rg -n "implementacion" docs`, verificación manual de enlaces.
- Coexisten `docs/index.md`, `docs/INDEX.md` y `docs/INDICE.md`, con contenido redundante. Se mantienen como duplicados inglés/español sin señalización clara.
- `docs/index.md` enlaza a `docs/proyecto/ONBOARDING.md`, `proyecto/TASK-012-ai-guidelines-onboarding.md`, `../TAREAS_ACTIVAS.md` y `../PLAN_EJECUCION_COMPLETO.md`; ninguno de esos archivos existe.
- Tanto `docs/index.md` como `docs/README.md` describen una "estructura v4.0" con carpeta raíz `implementacion/` y reorganización completa. Dicha carpeta no existe y múltiples directorios supuestamente eliminados (`docs/gobernanza`, `docs/desarrollo`, `docs/operaciones`, `docs/scripts`, `docs/features`, `docs/backend`) siguen presentes.
- Persisten requisitos dentro de `docs/backend/requisitos` y `docs/frontend/requisitos`, contradiciendo el anuncio de migración total.
- Directorios duplicados por idioma (`docs/infrastructure/` vs `docs/infraestructura/`) mantienen documentación divergente.
- Numerosas rutas apuntadas en índices (`docs/infrastructure/devops/`, `docs/frontend/componentes/`, etc.) no existen, dejando hipervínculos muertos.

## 3. Documentación de scripts vs realidad
**Preguntas guía**: "¿Los scripts listados en los README están realmente en disco?", "¿Hay duplicidad de carpetas por idioma?"
**Pruebas de validación**: `rg -n "scripts" docs/scripts`, `ls scripts`, verificación directa de rutas.
- `scripts/README.md` describe un árbol con `scripts/requisitos/` y comandos asociados; la carpeta y sus archivos (`generar_indices.py`, `contar_requisitos.sh`, etc.) no existen.
- El README remite a `../docs/implementacion/README.md`, `../docs/plantillas/readme.md` y `../docs/PROPUESTA_FINAL_REESTRUCTURACION.md`; las rutas son inexistentes.
- `docs/scripts/README.md`, `docs/scripts/SCRIPTS_MATRIX.md` y `docs/scripts/metrics-and-reporting.md` enumeran decenas de scripts "en producción" (`scripts/sdlc_agent.py`, `scripts/ci/backend_test.sh`, `scripts/dora_metrics.py`, `scripts/ai/agents/...`, `scripts/testing/unit/`, `scripts/validation/compliance/check_no_emojis.py`, etc.) que no se encuentran en el repositorio.
- Duplicación de directorios: `scripts/validation/` (documentación en inglés, mayormente placeholders) vs `scripts/validacion/` (scripts SQL/Python reales).
- `scripts/run_all_tests.sh` asume carpetas `api/` y `frontend/`, invoca `scripts/ci/backend_test.sh`, `frontend_test.sh` y `security_scan.sh`, ninguno presente. También sigue refiriendo a `frontend` en lugar de `ui`.
- `scripts/validar_estructura_docs.sh` valida supuestos post-migración (eliminación de `docs/implementacion`, existencia de `docs/infrastructure/requisitos`, etc.) que hoy no se cumplen, por lo que produce falsos positivos masivos.

## 4. Infraestructura y CPython
**Preguntas guía**: "¿Los manuales de infraestructura mencionan archivos inexistentes?", "¿Hay scripts con nombres incorrectos?"
**Pruebas de validación**: `ls infrastructure/cpython`, inspección manual de scripts y changelog.
- `docs/infrastructure/README.md` enumera subcarpetas (`arquitectura`, `checklists`, `planificacion_y_releases`, `qa`, etc.) que son vacías o contienen solo placeholders, sugiriendo una madurez que no existe.
- `infrastructure/cpython/README.md` instruye ejecutar `./infrastructure/cpython/scripts/validate-cpython.sh`, pero el script real se llama `validate_build.sh`.
- En `infrastructure/cpython/scripts/` existe un archivo con nombre anómalo `'Install prebuilt cpython.sh'` (con espacios y comillas) no referenciado en la documentación.
- `docs/infrastructure/CHANGELOG-cpython.md` habla de utilidades compartidas (`utils/logging.sh`, `utils/common.sh`, `config/versions.conf`) y pruebas Ruby ausentes en `infrastructure/cpython/`.

## 5. Carpeta `respaldo/`
**Preguntas guía**: "¿El contenido archivado sigue activo en la práctica?", "¿Hay señalización clara de obsolescencia?"
**Pruebas de validación**: `ls respaldo/docs_legacy`, revisión de READMEs.
- `respaldo/docs_legacy/README.md` declara que todo fue migrado a `implementacion/*`, pero la nueva estructura nunca se materializó. Documentación "activa" convive con la archivada sin distinción evidente.
- Dentro de `respaldo/docs_legacy` hay guías de gobernanza, devops, QA, etc., sin etiquetas visibles de obsolescencia, lo que facilita confusión.

## 6. Datos temporales y reportes
**Preguntas guía**: "¿Los esquemas de datos corresponden a scripts reales?", "¿Hay automatizaciones faltantes?"
**Pruebas de validación**: revisión de `logs_data`, búsqueda de scripts mencionados.
- `logs_data/SCHEMA.md` describe scripts Python (`scripts/dora_metrics.py`) encargados de poblar los JSON, pero esos scripts no existen; los archivos JSON están vacíos y sin rotación automatizada.
- `backend_analysis_results.json` continúa documentando rutas antiguas (`api/callcentersite/...`). Aunque `api/` esté fuera de scope operativo actual, el artefacto en raíz genera ruido y sugiere análisis desactualizado.

## 7. Riesgos operativos
**Preguntas guía**: "¿Qué prácticas actuales agravan la falta de sincronización?"
**Pruebas de validación**: inspección de README y scripts de CI inexistentes.
- El uso extendido de `git push --no-verify` (mencionado en README) evita que hooks y pipelines detecten inconsistencias. La cantidad de rutas rotas indica que los checks no se ejecutan.
- Documentación contradictoria obliga a los colaboradores a improvisar procesos, incrementando riesgos de errores en despliegues y soporte.

## Recomendaciones inmediatas
1. Congelar la documentación oficial (`docs/index.md`, `docs/README.md`) hasta eliminar duplicados (`INDEX.md` vs `index.md`) y actualizar enlaces.
2. Auditar `scripts/` para documentar solo lo existente; mover la visión futura a ADRs o backlog.
3. Definir una migración real entre `docs/` y `respaldo/docs_legacy`, con tabla de equivalencias y eliminación de duplicados.
4. Alinear guías de infraestructura/CPython corrigiendo nombres de scripts y removiendo features no implementadas.
5. Restablecer hooks de calidad y prohibir `--no-verify` hasta que las rutas críticas se verifiquen.
