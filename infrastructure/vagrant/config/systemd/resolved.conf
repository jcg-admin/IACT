# systemd-resolved Configuration for Ubuntu 18.04
# =============================================================================
# Configuracion avanzada de systemd-resolved
# Ubicacion: /etc/systemd/resolved.conf
# =============================================================================

[Resolve]
# Primary DNS Servers
# Usar los mismos que tus mirrors corporativos para coherencia
DNS=91.189.91.81 185.125.190.82

# Fallback DNS Servers
# Si los primarios fallan, usar DNS publicos confiables
FallbackDNS=8.8.8.8 8.8.4.4 1.1.1.1 1.0.0.1

# DNS over TLS (DoT)
# Mejora privacidad y seguridad
# Valores: no, opportunistic, yes
# 'opportunistic' usa DoT si esta disponible, sino DNS normal
DNSOverTLS=opportunistic

# DNSSEC (DNS Security Extensions)
# Valida autenticidad de respuestas DNS
# Valores: no, allow-downgrade, yes
# 'allow-downgrade' usa DNSSEC si esta disponible
DNSSEC=allow-downgrade

# DNS Stub Listener
# Escucha en 127.0.0.53:53 para consultas locales
# Valores: yes, no, udp, tcp
DNSStubListener=yes

# Cache
# Habilita cache de DNS para consultas mas rapidas
Cache=yes

# CacheFromLocalhost
# Cachea respuestas de localhost
CacheFromLocalhost=no

# DNS Query Timeout
# Tiempo maximo de espera para consultas DNS (en segundos)
# ReadEtcHosts
# Lee /etc/hosts ademas de DNS
ReadEtcHosts=yes

# ResolveUnicastSingleLabel
# Resuelve nombres de host de una sola etiqueta via unicast
ResolveUnicastSingleLabel=no

# LLMNR (Link-Local Multicast Name Resolution)
# Protocolo de resolucion de nombres en redes locales
# Valores: yes, resolve, no
LLMNR=yes

# MulticastDNS (mDNS)
# Para descubrimiento de servicios en red local (.local domains)
# Valores: yes, resolve, no
MulticastDNS=yes

# Domains
# Dominios de busqueda (opcional - ajusta segun tu red)
# Domains=localdomain example.com