# Documentaci√≥n de scripts

> **Leyenda**: ‚úÖ = Implementado | üìã = Planificado | ‚ö†Ô∏è = En migraci√≥n

Este documento combina el inventario real de scripts con la visi√≥n documentada del proyecto.

## üìç Navegaci√≥n r√°pida

- **Ejecutar validaciones completas**: `./scripts/run_all_tests.sh`
- **Ver todos los checks de CI**: `./scripts/ci/run-all-checks.sh`
- **Plantillas para nuevos scripts**: [`templates/`](../../scripts/templates/)
- **Matriz completa**: [`SCRIPTS_MATRIX.md`](SCRIPTS_MATRIX.md)

## ‚úÖ Scripts implementados

### CI/CD (`scripts/ci/`)
| Script | Prop√≥sito | Uso |
|--------|-----------|-----|
| `gate-no-emojis.sh` | Valida ausencia de emojis | Ejecutado en CI |
| `gate-docs-structure.sh` | Valida estructura de docs | Ejecutado en CI |
| `run-all-checks.sh` | Ejecuta todos los gates | `./scripts/ci/run-all-checks.sh` |
| `run_architecture_analysis.py` | Analiza calidad del backend | `python scripts/ci/run_architecture_analysis.py` |
| üìã `backend_test.sh` | Tests de backend | Planificado |
| üìã `frontend_test.sh` | Tests de frontend | Planificado |
| üìã `security_scan.sh` | Escaneo de seguridad | Planificado |
| üìã `test_pyramid_check.sh` | Validaci√≥n test pyramid | Planificado |

### Validaciones (`scripts/validation/`)

**Estructura** (‚úÖ Implementada, ‚ö†Ô∏è en migraci√≥n desde `validacion/`):
- `quality/` - Validaciones de calidad
  - `validate_frontmatter.sh`
  - `validate_shell_constitution.sh`
- `compliance/` - Cumplimiento de restricciones
  - `check_email_usage.sh`
  - `check_redis_usage.sh`
  - `validate_session_backend.sh`
- `security/` - Seguridad
  - `check_csrf_protection.sh`
  - `check_django_security.sh`
  - `check_sql_injection.sh`
  - `check_xss_protection.sh`
- `docs/` - Documentaci√≥n
  - `check_docs_old_references.sh`
  - `generate_docs_stats.sh`
  - `validate_autogenerated_docs.sh`

### Validaciones heredadas (`scripts/validacion/`)

‚ö†Ô∏è **En migraci√≥n a `validation/`**. Mientras tanto:
- `test_permisos.py`
- `validar_auditoria.sql`
- `validar_funciones.sql`
- `validar_grupos.sql`

### Infraestructura (`scripts/infrastructure/`)

| Subsistema | Scripts | Estado |
|------------|---------|--------|
| **Cassandra** | `install-cassandra.sh`, `configure-django.sh`, `setup-cron-jobs.sh` | ‚úÖ |
| **Logging** | `infrastructure_log_collector.py`, `infrastructure_logs_daemon.py` | ‚úÖ |
| **Disaster Recovery** | üìã `backup_mysql.sh`, `restore_mysql.sh`, `backup_cassandra.sh` | Planificado |
| **WASI** | `demo.sh`, `virtualize.sh`, `wasm_style_sandbox.sh` | ‚úÖ Experimental |

### Tests y validaciones ra√≠z

| Script | Prop√≥sito | Estado |
|--------|-----------|--------|
| `run_all_tests.sh` | Orquestador de todas las validaciones | ‚úÖ |
| `run_integration_tests.sh` | Tests de integraci√≥n | ‚úÖ |
| `validate_critical_restrictions.sh` | Valida RNF-002 (NO Redis) | ‚úÖ |
| `validate_database_router.sh` | Valida configuraci√≥n de DB router | ‚úÖ |
| `validate_security_config.sh` | Valida configuraci√≥n de seguridad | ‚úÖ |
| `validar_estructura_docs.sh` | Valida estructura de documentaci√≥n | ‚úÖ |

### Templates (`scripts/templates/`)

‚úÖ **Plantillas disponibles**:
- `bash_script_template.sh` - Template para scripts Bash complejos
- `posix_script_template.sh` - Template para scripts POSIX portables
- `library_template.sh` - Template para bibliotecas reutilizables

**Uso**:
```bash
cp scripts/templates/bash_script_template.sh scripts/mi-nuevo-script.sh
# Editar y personalizar
chmod +x scripts/mi-nuevo-script.sh
```

### Utilidades

| Script | Prop√≥sito | Estado |
|--------|-----------|--------|
| `install_hooks.sh` | Instala Git hooks | ‚úÖ |
| `reorganizar_docs_por_dominio.sh` | Reorganiza documentaci√≥n | ‚úÖ |
| üìã `cleanup_sessions.sh` | Limpia sesiones Django | Planificado |
| üìã `cleanup_branches.sh` | Limpia ramas mergeadas | Planificado |

## üìã Scripts planificados (visi√≥n completa)

### SDLC Core

**CLI principal** (`scripts/sdlc_agent.py`):
```bash
# Fase de planning
python scripts/sdlc_agent.py --phase planning --input "Feature: Sistema X"

# Pipeline completo
python scripts/sdlc_agent.py --pipeline --input "Feature: Dashboard"
```

**Agentes SDLC** (`scripts/ai/agents/`):
- `sdlc_orchestrator.py` - Orquestador de pipeline
- `sdlc_planner.py` - Generaci√≥n de planes
- `sdlc_feasibility.py` - An√°lisis de viabilidad
- `sdlc_design.py` - Generaci√≥n de HLD/LLD/ADRs
- `sdlc_testing.py` - Estrategia de testing
- `sdlc_deployment.py` - Planes de deployment
- üìã 14+ agentes adicionales

**Documentaci√≥n**: [`sdlc-agent-guide.md`](sdlc-agent-guide.md), [`sdlc-agents-reference.md`](sdlc-agents-reference.md)

### M√©tricas DORA

**`scripts/dora_metrics.py`**:
```bash
# √öltimos 30 d√≠as
python scripts/dora_metrics.py --repo 2-Coatl/IACT---project

# Per√≠odo espec√≠fico
python scripts/dora_metrics.py --start 2025-01-01 --end 2025-01-31 --format json

# Solo m√©tricas de documentaci√≥n
python scripts/dora_metrics.py --docs-only
```

**`scripts/generate_dora_report.sh`**:
```bash
./scripts/generate_dora_report.sh
# Output: dora_report_YYYYMMDD_HHMMSS.html
```

**Documentaci√≥n**: [`metrics-and-reporting.md`](metrics-and-reporting.md)

### Gesti√≥n de requisitos

**`scripts/requisitos/`**:
- `generar_indices.py` - Genera √≠ndices ISO 29148
- `validar_frontmatter.py` - Valida YAML de requisitos
- `contar_requisitos.sh` - Cuenta requisitos por tipo
- `listar_requisitos.sh` - Lista todos los requisitos

**Documentaci√≥n**: [`requirements-management.md`](requirements-management.md)

### Documentaci√≥n

- `generate_guides.py` - Genera gu√≠as operativas autom√°ticamente
- `sync_documentation.py` - Sincroniza documentaci√≥n entre directorios

### Deployment y health checks

- `deploy.sh` - Deployment blue-green (staging/production)
- `health_check.sh` - Verificaci√≥n de salud post-deployment

## üìä Resumen por categor√≠a

| Categor√≠a | Implementados | Planificados | Total |
|-----------|--------------|--------------|-------|
| CI/CD | 4 | 4 | 8 |
| Validaciones | 15+ | 5 | 20+ |
| Infraestructura | 8 | 5 | 13 |
| Templates | 3 | 0 | 3 |
| SDLC | 0 | 20+ | 20+ |
| M√©tricas | 0 | 3 | 3 |
| Requisitos | 0 | 4 | 4 |
| Utilidades | 3 | 2 | 5 |
| **Total** | **~35** | **~45** | **~80** |

## üéØ Casos de uso comunes

### Desarrollo diario
```bash
# Antes de commit
./scripts/validate_critical_restrictions.sh
python scripts/check_no_emojis.py

# Ejecutar todos los tests
./scripts/run_all_tests.sh

# Solo backend
./scripts/run_all_tests.sh --skip-ui --skip-security
```

### CI/CD
```bash
# Ejecutar todos los checks
./scripts/ci/run-all-checks.sh

# An√°lisis de arquitectura
python scripts/ci/run_architecture_analysis.py
```

### Validaciones espec√≠ficas
```bash
# Validar RNF-002 (NO Redis)
./scripts/validate_critical_restrictions.sh

# Validar configuraci√≥n de seguridad
./scripts/validate_security_config.sh

# Validar estructura de docs
./scripts/validar_estructura_docs.sh
```

## üìö Recursos adicionales

### Documentaci√≥n detallada
- **Gu√≠a completa**: [`QUICKSTART.md`](QUICKSTART.md) - Comandos m√°s comunes
- **Matriz de scripts**: [`SCRIPTS_MATRIX.md`](SCRIPTS_MATRIX.md) - Tabla completa
- **Desarrollo de scripts**: [`script-development-guide.md`](script-development-guide.md)
- **Gu√≠a SDLC**: [`sdlc-agent-guide.md`](sdlc-agent-guide.md)

### Gu√≠as corporativas
- **Shell Scripting**: [`../gobernanza/shell_scripting_guide.md`](../gobernanza/shell_scripting_guide.md)
- **Est√°ndares de c√≥digo**: [`../gobernanza/estandares_codigo.md`](../gobernanza/estandares_codigo.md)
- **Gu√≠a de estilo**: [`../gobernanza/GUIA_ESTILO.md`](../gobernanza/GUIA_ESTILO.md)

## ‚ö†Ô∏è Notas importantes

### Estado de implementaci√≥n
- **‚úÖ Implementado** = Script existe y funciona
- **üìã Planificado** = Documentado pero no implementado a√∫n
- **‚ö†Ô∏è En migraci√≥n** = Existe pero cambiando de ubicaci√≥n

### Validaci√≥n antes de usar
Siempre verifica que el script exista antes de ejecutarlo:
```bash
# Verificar existencia
ls scripts/nombre_script.sh

# Dar permisos si es necesario
chmod +x scripts/nombre_script.sh
```

### Contribuir
1. Usa templates de `scripts/templates/`
2. Documenta en `docs/scripts/`
3. Agrega a `SCRIPTS_MATRIX.md`
4. Valida con `shellcheck` antes de commit

---

**√öltima actualizaci√≥n**: 2025-11-12  
**Mantenedores**: @tech-lead, @devops-lead  
**Feedback**: Crear issue con label `scripts`
